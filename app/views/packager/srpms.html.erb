<% srpm_count @sisyphus.srpms.all.count %>
<% title _("Prometheus 2.0 - Maintainer &laquo;") + h(@packager.name) + _("&raquo; - Packages") %>
<% url "/packager/" + h(@packager.login) + "/srpms" %>

<div class="header"><%=h _("Maintainer:") %> <%=h @packager.name %></div>
<p class="break" />
<span class="vkladka">&nbsp;<a href="/<%=h params[:locale] %>/packager/<%=h h@packager.login %>" class="news" title="просмотреть информацию о майнтейнере"><%=h _("Information") %></a>&nbsp;</span><span class="underl">&nbsp;</span><span class="current">&nbsp;<b><%=h _("Packages") %></b>&nbsp;</span><span class="underl">&nbsp;</span><span class="vkladka">&nbsp;<a href="/<%=h params[:locale] %>/packager/<%=h h@packager.login %>/gear" class="news" title="gear"><%=h _("Gear") %></a>&nbsp;</span><span class="underl">&nbsp;</span><span class="vkladka">&nbsp;<a href="/<%=h params[:locale] %>/packager/<%=h h@packager.login %>/bugs" class="news" title="Статистика по кол-ву bugs/FR, адресованных данному майнтейнеру"><%=h _("Bugs and FR") %></a>&nbsp;</span><span class="vkladka">&nbsp;<a href="/<%=h params[:locale] %>/packager/<%=h h@packager.login %>/repocop" class="news" title="Отчет repocop о найденных ошибках и замечаниях"><%=h _("Repocop") %></a>&nbsp;</span><p class="break" />
<b><%=h _("List of packages which was built by this maintainer:") %></b> [<%=h @packager.acls.count %>] <br /><br />

<table id="bugs" cellspacing="0" cellpadding="3" class="sortable">
  <tr>
    <th class="nosort"><%= _("repo<br/>cop") %><br/>
      <a href="?sort=status&amp;order=desc">
        <img src="/images/stock_navigate-prev.png" style="border-width:0px" title="<%=h _("sort by repocop status") %>" alt="<%=h _("sort by repocop status") %>" />
      </a>
    </th>
    <th><%=h _("package") %><br />
      <a href="?sort=name&amp;order=desc">
        <img src="/images/stock_navigate-prev.png" style="border-width:0px" title="<%=h _("sort by name") %>" alt="<%=h _("sort by name") %>" />
      </a>
    </th>
    <th class="nosort"><%= _("current<br />version") %></th>
    <th><%=h _("build time") %></th>
    <th><%= _("age") %><br />
      <a href="?sort=age&amp;order=asc">
        <img src="/images/stock_navigate-next.png" style="border-width:0px" title="<%=h _("sort by age") %>" alt="<%=h _("sort by age") %>" />
      </a>
    </th>
    <th class="nosort"><%= _("Url") %></th>
    <th class="nosort"><%=h _("Summary") %></th>
  </tr>

  <% @packager.srpms.each do |srpm| %>
  <tr>
    <td>
      <% repocop_status = 'skip' %>
      <% srpm.repocops.each do |repocop| %>
        <% repocop_status = 'ok' if repocop.status == 'ok' and repocop_status != 'info' and repocop_status != 'experimental' and repocop_status != 'warn' and repocop_status != 'fail' %>
        <% repocop_status = 'info' if repocop.status == 'info' and repocop_status != 'experimental' and repocop_status != 'warn' and repocop_status != 'fail' %>
        <% repocop_status = 'experimental' if repocop.status == 'experimental' and repocop_status != 'warn' and repocop_status != 'fail' %>
        <% repocop_status = 'warn' if repocop.status == 'warn' and repocop_status != 'fail' %>
        <% repocop_status = 'fail' if repocop.status == 'fail' %>
      <% end %>
      <%= link_to '<img src="/images/' + repocop_status + '.png" alt="' + repocop_status +'" />', '/' + h(params[:locale]) + '/srpm/Sisyphus/' + h(srpm.name) + '/repocop', :class => 'repocoplink', :title => 'repocop' %>
    </td>
    <td class="strange">
      <%= link_to h(srpm.name), '/' + h(params[:locale]) + '/srpm/Sisyphus/' + h(srpm.name), :class => 'news' %>
    </td>
    <td>
      <%=h srpm.version %>-<%=h srpm.release %>
    </td>
    <td>
      <%=h srpm.buildtime %>
    </td>
    <td>
      <%=h time_ago_in_words(srpm.buildtime) %> <%= _("ago") %>
    </td>
    <td>
      <% if srpm.url != nil %><%= link_to srpm.url[0..27] + '...', srpm.url, :class => 'news' %><% else %>&nbsp;<% end %>
    </td>
    <td style="text-align:left;">
      <%=h srpm.summary %>
    </td>
  </tr>
  <% end %>

</table>
